# تقرير: خطوات تسجيل الطالب في منصة إدارة التعلم

## نظرة عامة
هذا التقرير يوضح الخطوات الكاملة التي يقوم بها الطالب لتسجيل حساب جديد في منصة إدارة التعلم (LMS).

---

## الخطوات التفصيلية لتسجيل الطالب

### الخطوة 1: الوصول إلى صفحة التسجيل
- يفتح الطالب التطبيق أو الموقع الإلكتروني للمنصة
- ينتقل إلى صفحة التسجيل (Register/Register Student)
- يمكن الوصول إلى صفحة التسجيل من:
  - الصفحة الرئيسية (Landing Page)
  - صفحة تسجيل الدخول (Login Page)
  - رابط مباشر: `/register/student`

### الخطوة 2: ملء بيانات التسجيل الأساسية

#### 2.1 البيانات المطلوبة (إلزامية):
1. **الاسم بالعربية** (`nameAr`)
   - يجب إدخال الاسم الكامل باللغة العربية
   - مثال: "محمد أحمد العلي"

2. **الاسم بالإنجليزية** (`nameEn`)
   - يجب إدخال الاسم الكامل باللغة الإنجليزية
   - مثال: "Mohammed Ahmed Al-Ali"

3. **البريد الإلكتروني** (`email`)
   - يجب أن يكون بريد إلكتروني صحيح وصيغة صالحة
   - يجب أن يكون فريداً (غير مستخدم من قبل)
   - مثال: `student@example.com`

4. **كلمة المرور** (`password`)
   - يجب أن تكون على الأقل 6 أحرف
   - يُنصح باستخدام مزيج من الأحرف والأرقام والرموز
   - مثال: `Student123!`

5. **تأكيد كلمة المرور** (`repeatPassword`)
   - يجب أن تطابق كلمة المرور المدخلة في الحقل السابق
   - للتحقق من صحة إدخال كلمة المرور

#### 2.2 البيانات الاختيارية:
6. **رقم الهاتف** (`phone`)
   - يمكن إدخال رقم الهاتف (اختياري)
   - يجب أن يكون فريداً إذا تم إدخاله
   - مثال: `+96512345678`

7. **السنة الدراسية** (`year`)
   - السنة الدراسية للطالب (اختياري)
   - مثال: `2024`

8. **الفصل الدراسي** (`semester`)
   - الفصل الدراسي الحالي (اختياري)
   - مثال: `1` أو `2`

9. **القسم/التخصص** (`department`)
   - القسم أو التخصص الدراسي (اختياري)
   - مثال: `علوم الحاسوب`

### الخطوة 3: التحقق من صحة البيانات

#### 3.1 التحقق من صحة الإدخال:
- يتحقق النظام تلقائياً من:
  - ✅ جميع الحقول الإلزامية مملوءة
  - ✅ البريد الإلكتروني بصيغة صحيحة
  - ✅ كلمة المرور تتطابق مع تأكيد كلمة المرور
  - ✅ طول كلمة المرور 6 أحرف على الأقل
  - ✅ البريد الإلكتروني غير مستخدم من قبل
  - ✅ رقم الهاتف (إن وُجد) غير مستخدم من قبل

#### 3.2 رسائل الخطأ المحتملة:
- **"Required fields are missing"** - الحقول المطلوبة مفقودة
- **"Passwords do not match"** - كلمات المرور غير متطابقة
- **"Password must be at least 6 characters"** - كلمة المرور قصيرة جداً
- **"Email already exists"** - البريد الإلكتروني مستخدم مسبقاً
- **"Phone already exists"** - رقم الهاتف مستخدم مسبقاً

### الخطوة 4: إرسال طلب التسجيل

#### 4.1 عملية الإرسال:
- يضغط الطالب على زر "تسجيل" أو "Register"
- يتم إرسال البيانات إلى الخادم عبر API:
  ```
  POST /api/auth/register/student
  ```

#### 4.2 ما يحدث في الخادم:
1. **التحقق من البيانات**: يتم التحقق من جميع البيانات المدخلة
2. **التحقق من التكرار**: يتم التحقق من عدم وجود مستخدم بنفس البريد الإلكتروني أو رقم الهاتف
3. **تشفير كلمة المرور**: يتم تشفير كلمة المرور باستخدام hash آمن
4. **إنشاء حساب المستخدم**: يتم إنشاء حساب جديد في قاعدة البيانات مع:
   - الدور: `STUDENT`
   - الحالة: `ACTIVE` (نشط)
5. **إنشاء سلة التسوق**: يتم إنشاء سلة تسوق تلقائياً للطالب الجديد

### الخطوة 5: استلام رسالة النجاح

#### 5.1 رسالة النجاح:
- عند نجاح التسجيل، يستلم الطالب رسالة:
  ```
  "Student registered successfully"
  ```
  أو بالعربية: "تم تسجيل الطالب بنجاح"

#### 5.2 البيانات المُرجعة:
- يتم إرجاع بيانات المستخدم (بدون كلمة المرور):
  ```json
  {
    "success": true,
    "message": "Student registered successfully",
    "data": {
      "user": {
        "id": "uuid",
        "nameAr": "محمد أحمد العلي",
        "nameEn": "Mohammed Ahmed Al-Ali",
        "email": "student@example.com",
        "phone": "+96512345678",
        "role": "STUDENT",
        "status": "ACTIVE",
        "year": 2024,
        "semester": 1,
        "department": "علوم الحاسوب"
      }
    }
  }
  ```

### الخطوة 6: تسجيل الدخول (اختياري)

#### 6.1 بعد التسجيل الناجح:
- يمكن للطالب تسجيل الدخول فوراً باستخدام:
  - البريد الإلكتروني
  - كلمة المرور
  - الدور: `STUDENT`

#### 6.2 عملية تسجيل الدخول:
```
POST /api/auth/login
{
  "email": "student@example.com",
  "password": "Student123!",
  "role": "STUDENT"
}
```

---

## الميزات التلقائية بعد التسجيل

### 1. إنشاء سلة التسوق تلقائياً
- يتم إنشاء سلة تسوق فارغة للطالب الجديد
- يمكن للطالب إضافة الدورات إلى السلة مباشرة

### 2. الحساب نشط مباشرة
- الحساب يكون في حالة `ACTIVE` فور التسجيل
- لا حاجة لتفعيل الحساب عبر البريد الإلكتروني

### 3. الوصول الكامل للمنصة
- يمكن للطالب الوصول إلى جميع ميزات المنصة فوراً:
  - تصفح الدورات
  - إضافة الدورات إلى السلة
  - إضافة الدورات إلى قائمة المفضلة
  - التسجيل في الدورات
  - الوصول إلى المحتوى التعليمي
  - أداء الامتحانات
  - إضافة التقييمات

---

## متطلبات الأمان

### 1. كلمة المرور
- **الحد الأدنى**: 6 أحرف
- **الأفضل**: مزيج من الأحرف الكبيرة والصغيرة والأرقام والرموز
- يتم تشفير كلمة المرور قبل حفظها في قاعدة البيانات

### 2. البريد الإلكتروني
- يجب أن يكون فريداً في النظام
- يتم التحقق من صحة الصيغة

### 3. رقم الهاتف
- إذا تم إدخاله، يجب أن يكون فريداً
- يتم التحقق من عدم التكرار

---

## الأخطاء الشائعة وحلولها

### خطأ: "Email already exists"
**السبب**: البريد الإلكتروني مستخدم مسبقاً  
**الحل**: استخدام بريد إلكتروني آخر أو تسجيل الدخول بالحساب الموجود

### خطأ: "Passwords do not match"
**السبب**: كلمة المرور وتأكيدها غير متطابقين  
**الحل**: التأكد من إدخال نفس كلمة المرور في كلا الحقلين

### خطأ: "Password must be at least 6 characters"
**السبب**: كلمة المرور قصيرة جداً  
**الحل**: استخدام كلمة مرور من 6 أحرف على الأقل

### خطأ: "Required fields are missing"
**السبب**: بعض الحقول الإلزامية فارغة  
**الحل**: التأكد من ملء جميع الحقول المطلوبة (الاسم بالعربية، الاسم بالإنجليزية، البريد الإلكتروني، كلمة المرور، تأكيد كلمة المرور)

---

## ملخص الخطوات السريع

1. ✅ فتح صفحة التسجيل
2. ✅ إدخال الاسم بالعربية والإنجليزية
3. ✅ إدخال البريد الإلكتروني
4. ✅ إدخال كلمة المرور وتأكيدها
5. ✅ (اختياري) إدخال رقم الهاتف والبيانات الأخرى
6. ✅ الضغط على زر التسجيل
7. ✅ استلام رسالة النجاح
8. ✅ تسجيل الدخول والبدء في استخدام المنصة

---

## API Endpoint

**الرابط**: `POST /api/auth/register/student`

**المعاملات المطلوبة**:
```json
{
  "nameAr": "محمد أحمد العلي",
  "nameEn": "Mohammed Ahmed Al-Ali",
  "email": "student@example.com",
  "password": "Student123!",
  "repeatPassword": "Student123!"
}
```

**المعاملات الاختيارية**:
```json
{
  "phone": "+96512345678",
  "year": 2024,
  "semester": 1,
  "department": "علوم الحاسوب"
}
```

**الاستجابة الناجحة** (201):
```json
{
  "success": true,
  "message": "Student registered successfully",
  "data": {
    "user": { ... }
  }
}
```

---

## الخلاصة

عملية تسجيل الطالب في المنصة بسيطة ومباشرة، وتتطلب فقط:
- البيانات الأساسية (الاسم، البريد الإلكتروني، كلمة المرور)
- التحقق من صحة البيانات
- إرسال الطلب

بعد التسجيل الناجح، يتم إنشاء الحساب تلقائياً مع سلة تسوق، ويمكن للطالب البدء في استخدام جميع ميزات المنصة فوراً.

---

**تاريخ التقرير**: 2024  
**الإصدار**: 1.0  
**المنصة**: نظام إدارة التعلم (LMS)

